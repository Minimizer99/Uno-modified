<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>UNO-Style Online Card Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- LEGAL NOTE:
       This is an ORIGINAL UNO-style game inspired by online board-card games.
       It does NOT copy Buddy Board Games branding, layout, or assets.
       All code, UI, and logic here are original.
  -->

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: radial-gradient(circle at top, #1b4332, #081c15);
      color: #fff;
    }

    header {
      padding: 14px;
      font-size: 1.4rem;
      font-weight: 700;
      background: rgba(0,0,0,0.4);
      text-align: center;
    }

    #screen {
      max-width: 1200px;
      margin: auto;
      padding: 16px;
    }

    .hidden { display: none; }

    /* LOBBY */
    #lobby {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 14px;
    }

    input, button {
      padding: 10px 14px;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
    }

    button {
      cursor: pointer;
      font-weight: 600;
      background: #2d6a4f;
      color: #fff;
    }

    button:hover { background: #40916c; }

    /* GAME TABLE */
    #table {
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 14px;
    }

    #players {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .player {
      padding: 8px 12px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      font-size: 0.9rem;
    }

    #center {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 18px;
    }

    .card {
      width: 72px;
      height: 104px;
      border-radius: 14px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: 800;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: 0 6px 12px rgba(0,0,0,0.5);
      user-select: none;
    }

    .red { background: #e63946; }
    .yellow { background: #f1c40f; color: #000; }
    .green { background: #2ecc71; }
    .blue { background: #3498db; }
    .black { background: #222; }

    #hand {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    #status {
      text-align: center;
      opacity: 0.85;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>

<header>UNO‑Style Multiplayer Card Game</header>

<div id="screen">

  <!-- LOBBY SCREEN -->
  <div id="lobby">
    <p>Create or join a room to play</p>
    <input id="nameInput" placeholder="Your name" />
    <button onclick="createRoom()">Create Room</button>
    <input id="roomInput" placeholder="Room code" />
    <button onclick="joinRoom()">Join Room</button>
    <div id="lobbyStatus"></div>
  </div>

  <!-- GAME SCREEN -->
  <div id="table" class="hidden">
    <div id="players"></div>

    <div id="center">
      <div id="deck" class="card black">DECK</div>
      <div id="pile" class="card">?</div>
    </div>

    <div id="hand"></div>
    <div id="status">Waiting for players…</div>
  </div>

</div>

<script>
  /***********************************************************
   *  PHASE 1: FRONTEND + LOCAL LOGIC (NO BACKEND YET)
   *  Next step will add Firebase realtime multiplayer
   ***********************************************************/

  const colors = ['red','yellow','green','blue'];
  const values = ['0','1','2','3','4','5','6','7','8','9','skip','reverse','draw2'];

  let playerName = '';
  let roomCode = '';

  let deck = [];
  let hand = [];
  let pile = null;
  let currentColor = null;

  function createRoom() {
    playerName = document.getElementById('nameInput').value.trim();
    if (!playerName) return alert('Enter name');

    roomCode = Math.random().toString(36).substring(2,7).toUpperCase();
    document.getElementById('lobbyStatus').textContent = `Room created: ${roomCode}`;
    startLocalGame();
  }

  function joinRoom() {
    playerName = document.getElementById('nameInput').value.trim();
    roomCode = document.getElementById('roomInput').value.trim();
    if (!playerName || !roomCode) return alert('Enter name and room');

    document.getElementById('lobbyStatus').textContent = `Joined room: ${roomCode}`;
    startLocalGame();
  }

  function startLocalGame() {
    document.getElementById('lobby').classList.add('hidden');
    document.getElementById('table').classList.remove('hidden');

    createDeck();
    hand = deck.splice(0,7);
    pile = deck.pop();
    currentColor = pile.color;

    render();
  }

  function createDeck() {
    deck = [];
    for (let c of colors) {
      for (let v of values) {
        deck.push({color:c,value:v});
        if (v !== '0') deck.push({color:c,value:v});
      }
    }
    for (let i=0;i<4;i++) {
      deck.push({color:'black',value:'wild'});
      deck.push({color:'black',value:'wild4'});
    }
    deck.sort(()=>Math.random()-0.5);
  }

  function canPlay(card) {
    return card.color==='black' || card.color===currentColor || card.value===pile.value;
  }

  function playCard(i) {
    const card = hand[i];
    if (!canPlay(card)) return;

    hand.splice(i,1);
    pile = card;
    currentColor = card.color==='black'
      ? colors[Math.floor(Math.random()*4)]
      : card.color;

    render();
    if (hand.length===0) alert('YOU WIN');
  }

  function render() {
    document.getElementById('players').innerHTML = `<div class='player'>${playerName} (You)</div>`;

    const pileDiv = document.getElementById('pile');
    pileDiv.className = `card ${pile.color}`;
    pileDiv.textContent = pile.value.toUpperCase();

    const handDiv = document.getElementById('hand');
    handDiv.innerHTML='';

    hand.forEach((c,i)=>{
      const d=document.createElement('div');
      d.className=`card ${c.color}`;
      d.textContent=c.value.toUpperCase();
      d.onclick=()=>playCard(i);
      handDiv.appendChild(d);
    });

    document.getElementById('status').textContent = `Room ${roomCode} · Color: ${currentColor}`;
  }
</script>

</body>
</html>
